{% extends 'base.html' %}
<!-- Extending the base template for layout consistency -->

{% block title %}Dashboard{% endblock %}
<!-- Setting the page title to "Dashboard" -->

{% block content %}
<style>
    /* Styling for the card elements */
    .card {
        background-color: #f8f9fa;
        border-radius: 10px; /* Rounded corners for cards */
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Add shadow for depth */
        margin-bottom: 30px; /* Space below the card */
        transition: none; /* Disable hover effects */
    }
    .card-body {
        padding: 0px; /* Adjust padding to reduce card height */
    }

    /* Prevent movement or effects on hover */
    .card:hover {
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Keep shadow consistent */
        transform: none; /* Prevent scaling or movement */
    }

    /* Set widths for table columns to align data properly */
    th:nth-child(1), td:nth-child(1) { width: 10%; } /* Ticker */
    th:nth-child(2), td:nth-child(2) { width: 15%; } /* Price */
    th:nth-child(3), td:nth-child(3) { width: 15%; } /* Volume */
    th:nth-child(4), td:nth-child(4) { width: 20%; } /* Market Cap */
    th:nth-child(5), td:nth-child(5) { width: 15%; } /* Opening Price */
    th:nth-child(6), td:nth-child(6) { width: 15%; } /* High */
    th:nth-child(7), td:nth-child(7) { width: 10%; } /* Low */
</style>

<!-- Main content of the dashboard -->
<div class="container mt-4">
    <div class="row">
        <!-- Profile Summary (Left Sidebar) -->
        <div class="col-md-3">
            <div class="card">
                <div class="card-body text-center">
                    <!-- Placeholder for profile picture -->
                    <img src="https://via.placeholder.com/100" alt="Profile Icon" class="img-fluid rounded-circle mb-3">
                    <h4>{{ username }}</h4> <!-- Display username dynamically -->
                    <p>Current Cash: ${{ cash }}</p> <!-- Display current cash -->

                    <!-- User Settings button -->
                    <a class="btn btn-outline-primary w-100 mt-3" href="{{ url_for('user_settings') }}">
                        User Settings
                    </a>
                </div>
            </div>
        </div>

        <!-- Main Dashboard (Center Section) -->
        <div class="col-md-6">
            <!-- Stock selection and sell button -->
            <div class="card">
                <div class="card-body text-center">
                    <h5>Current Stocks</h5>
                    <select class="form-select mb-3">
                        <option selected>Select a stock</option>
                        <option value="1">Stock A</option>
                        <option value="2">Stock B</option>
                        <option value="3">Stock C</option>
                    </select>
                    
                    <button class="btn btn-danger mb-3">Sell</button> <!-- Sell button -->
                </div>
            </div>

            <!-- Stock overview chart section -->
            <div class="card mt-4">
                <div class="card-body">
                    <h5 class="text-center">Stock Overview</h5>
                    <canvas id="stocksChart" style="height: 200px;"></canvas> <!-- ChartJS for displaying stock data -->
                </div>
            </div>

            <!-- Action buttons for buying stocks and adding cash -->
            <div class="row mt-4">
                <!-- Buy Stocks button -->
                <div class="col">
                    <a class="btn btn-primary w-100" href="{{ url_for('buy_stocks') }}">
                        <i class="fas fa-shopping-cart"></i> Buy Stocks
                    </a>
                </div>
                <!-- Add Cash button -->
                <div class="col">
                    <a class="btn btn-success w-100" href="{{ url_for('add_cash') }}">
                        <i class="fas fa-dollar-sign"></i> Add Cash
                    </a>
                </div>
            </div>

            <!-- Logout button -->
            <div class="text-center mt-4">
                <button class="btn btn-outline-danger btn-logout" href="{{ url_for('logout') }}">
                    Logout
                </button>
            </div>
        </div>

        <!-- Stocks Overview Section (Right Sidebar) -->
        <div class="col-md-3 ml-n3">
            <div class="row">
                <div class="col-md-12 card mt-8">
                    <div class="card-body">
                        <h5 class="text-center">Available Stocks</h5>
                        <div class="table-responsive">
                            <!-- Table displaying available stock data -->
                            <table class="table table-striped table-bordered w-100">
                                <thead>
                                    <tr>
                                        <th>Ticker</th>
                                        <th>Price</th>
                                        <th>Volume</th>
                                        <th>Market Cap</th>
                                        <th>Opening Price</th>
                                        <th>High</th>
                                        <th>Low</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Example stock data -->
                                    <tr>
                                        <td>APPL</td>
                                        <td>$150.00</td>
                                        <td>1,000</td>
                                        <td>$150,000</td>
                                        <td>$148.00</td>
                                        <td>$152.00</td>
                                        <td>$147.00</td>
                                    </tr>
                                    <tr>
                                        <td>GOOGL</td>
                                        <td>$2800.00</td>
                                        <td>500</td>
                                        <td>$1,400,000</td>
                                        <td>$2750.00</td>
                                        <td>$2820.00</td>
                                        <td>$2740.00</td>
                                    </tr>
                                    <tr>
                                        <td>AMZN</td>
                                        <td>$3400.00</td>
                                        <td>300</td>
                                        <td>$1,020,000</td>
                                        <td>$3350.00</td>
                                        <td>$3420.00</td>
                                        <td>$3300.00</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ChartJS to render the stock breakdown chart -->
<script>
    const ctx = document.getElementById('stocksChart').getContext('2d');
    const stocksChart = new Chart(ctx, {
        type: 'bar', // Bar chart for stock values
        data: {
            labels: ['Stock A', 'Stock B', 'Stock C','d','e','f','g','h','i','j','k','l','m','m','n','o','p'], // Replace with actual stock names
            datasets: [{
                label: 'Stock Values',
                data: [200, 150, 300,99,120], // Replace with actual values
                backgroundColor: [
                    'rgba(1, 255, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(255, 206, 86, 0.2)'
                ],
                borderColor: [
                    'rgba(1, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true // Ensure y-axis starts from zero
                }
            }
        }
    });
</script>
{% endblock %}
<!-- End of content block -->









